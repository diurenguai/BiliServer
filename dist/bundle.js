/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./server/app.js":
/*!***********************!*\
  !*** ./server/app.js ***!
  \***********************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var express = __webpack_require__(/*! express */ \"express\");\nvar path = __webpack_require__(/*! path */ \"path\");\nvar cookieParser = __webpack_require__(/*! cookie-parser */ \"cookie-parser\");\nvar logger = __webpack_require__(/*! morgan */ \"morgan\");\nvar cors = __webpack_require__(/*! cors */ \"cors\"); // 引入 cors 中间件\nvar usersRouter = __webpack_require__(/*! ./routes/user */ \"./server/routes/user.js\");\nvar videoRouter = __webpack_require__(/*! ./routes/index */ \"./server/routes/index.js\");\nvar mixRouter = __webpack_require__(/*! ./routes/userNeedCheck */ \"./server/routes/userNeedCheck.js\");\nvar app = express();\napp.use(logger('dev'));\napp.use(express.json());\napp.use(express.urlencoded({\n  extended: false\n}));\napp.use(cookieParser());\napp.use(express[\"static\"](path.join(__dirname, 'public')));\n\n// 配置 CORS\napp.use(cors({\n  origin: '*',\n  // 或指定特定的前端地址，例如 'http://localhost:5173'\n  methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],\n  allowedHeaders: ['Content-Type', 'Authorization']\n}));\napp.use('/users', usersRouter);\napp.use('/video', videoRouter);\napp.use('/mix', mixRouter);\nmodule.exports = app;\n\n//# sourceURL=webpack://bilibili-server/./server/app.js?");

/***/ }),

/***/ "./server/config.js":
/*!**************************!*\
  !*** ./server/config.js ***!
  \**************************/
/***/ ((module) => {

eval("// config/config.js\nvar config = {\n  MYSQL: {\n    username: 'root',\n    password: '20020505lym',\n    database: 'mybi',\n    host: 'localhost',\n    dialect: 'mysql'\n  }\n};\n// 导出配置\nmodule.exports = config;\n\n//# sourceURL=webpack://bilibili-server/./server/config.js?");

/***/ }),

/***/ "./server/controller/token.js":
/*!************************************!*\
  !*** ./server/controller/token.js ***!
  \************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// 引入jsonwebtoken包\nvar jwt = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n// 设定一个密钥，用来加密和解密token\nvar tokenKey = 'XfZEpWEn?ARD7rHBN';\n// 定义一个对象\nvar Token = {\n  /**\r\n   * Token加密方法\r\n   * @param data 需要加密在Token中的数据\r\n   * @param time Token的过期时间，单位：s\r\n   * @returns {*} 返回一个Token\r\n   */\n  encrypt: function encrypt(data, time) {\n    return jwt.sign(data, tokenKey, {\n      expiresIn: time\n    });\n  },\n  /**\r\n   * Token解密方法\r\n   * @param token 加密之后的Token\r\n   * @returns 返回对象{{token: boolean（true表示Token合法，false则不合法）, data: *（解密出来的数据或错误信息）}}\r\n   */\n  decrypt: function decrypt(token) {\n    try {\n      var data = jwt.verify(token, tokenKey);\n      return {\n        token: true,\n        data: data\n      };\n    } catch (e) {\n      return {\n        token: false,\n        data: e\n      };\n    }\n  }\n};\n// 导出对象，方便其他模块调用\nmodule.exports = Token;\n\n//# sourceURL=webpack://bilibili-server/./server/controller/token.js?");

/***/ }),

/***/ "./server/controller/user.js":
/*!***********************************!*\
  !*** ./server/controller/user.js ***!
  \***********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar async = __webpack_require__(/*! async */ \"async\");\nvar usersModel = __webpack_require__(/*! ../models/user */ \"./server/models/user.js\");\nvar Constant = __webpack_require__(/*! ../util/constant */ \"./server/util/constant.js\");\nvar Token = __webpack_require__(/*! ./token */ \"./server/controller/token.js\");\nvar Common = __webpack_require__(/*! ../util/utilMethod */ \"./server/util/utilMethod.js\");\nvar TOKEN_EXPIRE_SECONDS = 3600;\nfunction userLogin(_x, _x2) {\n  return _userLogin.apply(this, arguments);\n} // 添加视频观看次数\nfunction _userLogin() {\n  _userLogin = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res) {\n    var resObj, _req$body, username, password, user, token;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          resObj = Common.clone(Constant.DEFAULT_SUCCESS);\n          _req$body = req.body, username = _req$body.username, password = _req$body.password;\n          _context.prev = 2;\n          // 检查请求参数\n          Common.checkParams(req.body, ['username', 'password']);\n          // 查询用户\n          _context.next = 6;\n          return usersModel.findOne({\n            where: {\n              username: username,\n              password: password\n            }\n          });\n        case 6:\n          user = _context.sent;\n          if (user) {\n            _context.next = 9;\n            break;\n          }\n          return _context.abrupt(\"return\", res.status(400).json(Constant.LOGIN_ERROR));\n        case 9:\n          // 生成 Token\n          token = Token.encrypt({\n            id: user.id\n          }, TOKEN_EXPIRE_SECONDS);\n          resObj.data = {\n            id: user.id,\n            username: user.username,\n            nickname: user.nickname,\n            avatar: user.avatar,\n            follows: user.follows,\n            fans: user.fans,\n            video: user.video,\n            introduction: user.introduction,\n            token: token\n          };\n          return _context.abrupt(\"return\", res.status(200).json(resObj));\n        case 14:\n          _context.prev = 14;\n          _context.t0 = _context[\"catch\"](2);\n          console.error(_context.t0);\n          return _context.abrupt(\"return\", res.status(500).json(Constant.DEFAULT_ERROR));\n        case 18:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[2, 14]]);\n  }));\n  return _userLogin.apply(this, arguments);\n}\nfunction addView(_x3, _x4) {\n  return _addView.apply(this, arguments);\n} // 定义 userRegister 函数\nfunction _addView() {\n  _addView = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res) {\n    var resObj, id, video;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          resObj = Common.clone(Constant.DEFAULT_SUCCESS);\n          id = req.body.id;\n          _context2.prev = 2;\n          // 检查请求参数\n          Common.checkParams(req.body, ['id']);\n\n          // 查询视频\n          _context2.next = 6;\n          return videoModel.findOne({\n            where: {\n              id: id\n            }\n          });\n        case 6:\n          video = _context2.sent;\n          if (video) {\n            _context2.next = 9;\n            break;\n          }\n          return _context2.abrupt(\"return\", res.status(404).json(Constant.VIDEO_NOT_FOUND_ERROR));\n        case 9:\n          // 更新观看次数\n          video.views++;\n          _context2.next = 12;\n          return video.save();\n        case 12:\n          resObj.data = video.views;\n          return _context2.abrupt(\"return\", res.status(200).json(resObj));\n        case 16:\n          _context2.prev = 16;\n          _context2.t0 = _context2[\"catch\"](2);\n          console.error(_context2.t0);\n          return _context2.abrupt(\"return\", res.status(500).json(Constant.DEFAULT_ERROR));\n        case 20:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[2, 16]]);\n  }));\n  return _addView.apply(this, arguments);\n}\nfunction userRegister(_x5, _x6) {\n  return _userRegister.apply(this, arguments);\n} // 使用 userRegister 函数\n// 导出\nfunction _userRegister() {\n  _userRegister = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(req, res) {\n    var resObj, _req$body2, nickname, username, password, id, existingUser, newUser, errorResponse;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          resObj = Common.clone(Constant.DEFAULT_SUCCESS);\n          _req$body2 = req.body, nickname = _req$body2.nickname, username = _req$body2.username, password = _req$body2.password, id = _req$body2.id;\n          _context3.prev = 2;\n          // 检查请求参数\n          Common.checkParams(req.body, ['username', 'password']);\n\n          // 检查用户名是否已存在\n          _context3.next = 6;\n          return usersModel.findOne({\n            where: {\n              username: username\n            }\n          });\n        case 6:\n          existingUser = _context3.sent;\n          if (!existingUser) {\n            _context3.next = 9;\n            break;\n          }\n          return _context3.abrupt(\"return\", res.status(400).json(_objectSpread({}, Constant.REGISTER_ERROR)));\n        case 9:\n          _context3.next = 11;\n          return usersModel.create({\n            nickname: nickname,\n            username: username,\n            password: password,\n            id: id\n          });\n        case 11:\n          newUser = _context3.sent;\n          resObj.data = newUser;\n\n          // 返回成功响应\n          return _context3.abrupt(\"return\", res.status(201).json(resObj));\n        case 16:\n          _context3.prev = 16;\n          _context3.t0 = _context3[\"catch\"](2);\n          // 处理错误\n          console.error('Registration Error:', {\n            message: _context3.t0.message,\n            stack: _context3.t0.stack,\n            details: _context3.t0\n          });\n          errorResponse = _context3.t0.message ? _objectSpread(_objectSpread({}, Constant.DEFAULT_ERROR), {}, {\n            message: _context3.t0.message\n          }) : Constant.DEFAULT_ERROR;\n          return _context3.abrupt(\"return\", res.status(500).json(errorResponse));\n        case 21:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[2, 16]]);\n  }));\n  return _userRegister.apply(this, arguments);\n}\nvar exportObj = {\n  userLogin: userLogin,\n  userRegister: userRegister,\n  addView: addView\n};\nmodule.exports = exportObj;\n\n//# sourceURL=webpack://bilibili-server/./server/controller/user.js?");

/***/ }),

/***/ "./server/controller/userNeedCheck.js":
/*!********************************************!*\
  !*** ./server/controller/userNeedCheck.js ***!
  \********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar usersModel = __webpack_require__(/*! ../models/user */ \"./server/models/user.js\");\nvar videoModel = __webpack_require__(/*! ../models/video */ \"./server/models/video.js\");\nvar commentModel = __webpack_require__(/*! ../models/comment */ \"./server/models/comment.js\");\nvar Constant = __webpack_require__(/*! ../util/constant */ \"./server/util/constant.js\");\nvar Common = __webpack_require__(/*! ../util/utilMethod */ \"./server/util/utilMethod.js\");\n\n// 导出函数\nvar exportObj = {\n  changeLike: changeLike,\n  changeUserLike: changeUserLike,\n  addComment: addComment\n};\nmodule.exports = exportObj;\n\n/**\r\n * 更新视频的喜欢数量\r\n * @param {Object} req - 请求对象\r\n * @param {Object} res - 响应对象\r\n */\nfunction changeLike(_x, _x2) {\n  return _changeLike.apply(this, arguments);\n}\n/**\r\n * 更新用户的喜欢列表\r\n * @param {Object} req - 请求对象\r\n * @param {Object} res - 响应对象\r\n */\nfunction _changeLike() {\n  _changeLike = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res) {\n    var resObj, _req$body, id, isAdd, video, newLikeCount;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          resObj = Common.clone(Constant.DEFAULT_SUCCESS);\n          _req$body = req.body, id = _req$body.id, isAdd = _req$body.isAdd;\n          _context.prev = 2;\n          _context.next = 5;\n          return videoModel.findOne({\n            where: {\n              id: id\n            }\n          });\n        case 5:\n          video = _context.sent;\n          if (video) {\n            _context.next = 8;\n            break;\n          }\n          return _context.abrupt(\"return\", res.status(404).json(_objectSpread(_objectSpread({}, Constant.DEFAULT_ERROR), {}, {\n            message: 'Video not found'\n          })));\n        case 8:\n          // 更新喜欢数量\n          newLikeCount = video.likes + (isAdd ? 1 : -1);\n          _context.next = 11;\n          return videoModel.update({\n            likes: newLikeCount\n          }, {\n            where: {\n              id: id\n            }\n          });\n        case 11:\n          resObj.data = newLikeCount;\n          return _context.abrupt(\"return\", res.status(200).json(resObj));\n        case 15:\n          _context.prev = 15;\n          _context.t0 = _context[\"catch\"](2);\n          console.error(_context.t0);\n          return _context.abrupt(\"return\", res.status(500).json(Constant.DEFAULT_ERROR));\n        case 19:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[2, 15]]);\n  }));\n  return _changeLike.apply(this, arguments);\n}\nfunction changeUserLike(_x3, _x4) {\n  return _changeUserLike.apply(this, arguments);\n}\n/**\r\n * 添加评论\r\n * @param {Object} req - 请求对象\r\n * @param {Object} res - 响应对象\r\n */\nfunction _changeUserLike() {\n  _changeUserLike = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res) {\n    var resObj, _req$body2, id, arrLike, result;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          resObj = Common.clone(Constant.DEFAULT_SUCCESS);\n          _req$body2 = req.body, id = _req$body2.id, arrLike = _req$body2.arrLike;\n          _context2.prev = 2;\n          _context2.next = 5;\n          return usersModel.update({\n            like: arrLike\n          }, {\n            where: {\n              id: id\n            }\n          });\n        case 5:\n          result = _context2.sent;\n          resObj.data = result;\n          return _context2.abrupt(\"return\", res.status(200).json(resObj));\n        case 10:\n          _context2.prev = 10;\n          _context2.t0 = _context2[\"catch\"](2);\n          console.error(_context2.t0);\n          return _context2.abrupt(\"return\", res.status(500).json(Constant.DEFAULT_ERROR));\n        case 14:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[2, 10]]);\n  }));\n  return _changeUserLike.apply(this, arguments);\n}\nfunction addComment(_x5, _x6) {\n  return _addComment.apply(this, arguments);\n}\nfunction _addComment() {\n  _addComment = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(req, res) {\n    var resObj, _req$body3, video_id, user_id, talk, result;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          resObj = Common.clone(Constant.DEFAULT_SUCCESS);\n          _req$body3 = req.body, video_id = _req$body3.video_id, user_id = _req$body3.user_id, talk = _req$body3.talk;\n          _context3.prev = 2;\n          _context3.next = 5;\n          return commentModel.create({\n            video_id: video_id,\n            user_id: user_id,\n            talk: talk\n          });\n        case 5:\n          result = _context3.sent;\n          resObj.data = result;\n          return _context3.abrupt(\"return\", res.status(201).json(resObj));\n        case 10:\n          _context3.prev = 10;\n          _context3.t0 = _context3[\"catch\"](2);\n          console.error(_context3.t0);\n          return _context3.abrupt(\"return\", res.status(500).json(Constant.DEFAULT_ERROR));\n        case 14:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[2, 10]]);\n  }));\n  return _addComment.apply(this, arguments);\n}\n\n//# sourceURL=webpack://bilibili-server/./server/controller/userNeedCheck.js?");

/***/ }),

/***/ "./server/controller/video.js":
/*!************************************!*\
  !*** ./server/controller/video.js ***!
  \************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n// 引入model实例\nvar carouselModel = __webpack_require__(/*! ../models/carousel */ \"./server/models/carousel.js\");\nvar videoModel = __webpack_require__(/*! ../models/video */ \"./server/models/video.js\");\nvar usersModel = __webpack_require__(/*! ../models/user */ \"./server/models/user.js\");\nvar commentModel = __webpack_require__(/*! ../models/comment */ \"./server/models/comment.js\");\nvar Common = __webpack_require__(/*! ../util/utilMethod */ \"./server/util/utilMethod.js\");\nvar moment = __webpack_require__(/*! moment */ \"moment\");\nvar Constant = __webpack_require__(/*! ../util/constant */ \"./server/util/constant.js\");\nmodule.exports = {\n  getCarousel: getCarousel,\n  getVideo: getVideo,\n  getDetail: getDetail,\n  getUsers: getUsers,\n  getCommentByvideo: getCommentByvideo,\n  getVideoByuser: getVideoByuser,\n  getDanmakuByvideo: getDanmakuByvideo\n};\nfunction getCarousel(_x, _x2) {\n  return _getCarousel.apply(this, arguments);\n}\nfunction _getCarousel() {\n  _getCarousel = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res) {\n    var resObj, result, list;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          resObj = Common.clone(Constant.DEFAULT_SUCCESS);\n          _context.prev = 1;\n          _context.next = 4;\n          return carouselModel.findAll({\n            limit: 4,\n            order: [['id', 'DESC']]\n          });\n        case 4:\n          result = _context.sent;\n          list = result.map(function (v) {\n            return {\n              id: v.id,\n              img: v.img,\n              title: v.title,\n              backgroundColor: v.backgroundColor\n            };\n          });\n          resObj.data = {\n            list: list\n          };\n          res.json(resObj);\n          _context.next = 14;\n          break;\n        case 10:\n          _context.prev = 10;\n          _context.t0 = _context[\"catch\"](1);\n          console.error(_context.t0);\n          res.status(500).json(Constant.DEFAULT_ERROR);\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[1, 10]]);\n  }));\n  return _getCarousel.apply(this, arguments);\n}\nfunction getVideo(_x3, _x4) {\n  return _getVideo.apply(this, arguments);\n}\nfunction _getVideo() {\n  _getVideo = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(req, res) {\n    var resObj, videos, list;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          resObj = Common.clone(Constant.DEFAULT_SUCCESS);\n          _context3.prev = 1;\n          _context3.next = 4;\n          return videoModel.findAll({\n            offset: parseInt(req.query.offset, 10) || 0,\n            limit: parseInt(req.query.limit, 10) || 4,\n            order: [['id', 'ASC']]\n          });\n        case 4:\n          videos = _context3.sent;\n          _context3.next = 7;\n          return Promise.all(videos.map(/*#__PURE__*/function () {\n            var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(v) {\n              var _yield$commentModel$f, Commentcount, user;\n              return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n                while (1) switch (_context2.prev = _context2.next) {\n                  case 0:\n                    _context2.next = 2;\n                    return commentModel.findAndCountAll({\n                      where: {\n                        video_id: v.id\n                      }\n                    });\n                  case 2:\n                    _yield$commentModel$f = _context2.sent;\n                    Commentcount = _yield$commentModel$f.count;\n                    _context2.next = 6;\n                    return usersModel.findOne({\n                      where: {\n                        id: v.up\n                      }\n                    });\n                  case 6:\n                    user = _context2.sent;\n                    return _context2.abrupt(\"return\", {\n                      id: v.id,\n                      title: v.title,\n                      up: v.up,\n                      img: v.img,\n                      views: v.views,\n                      likes: v.likes,\n                      stars: v.stars,\n                      shares: v.shares,\n                      coins: v.coins,\n                      link: v.link,\n                      introduction: v.introduction,\n                      viewsChange: Common.numChange(v.views),\n                      likesChange: Common.numChange(v.likes),\n                      starsChange: Common.numChange(v.stars),\n                      sharesChange: Common.numChange(v.shares),\n                      coinsChange: Common.numChange(v.coins),\n                      commentCount: Commentcount,\n                      // nickname: user.nickname,\n                      nickname: user ? user.nickname : 'Unknown' // 处理 null 值\n                    });\n                  case 8:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }, _callee2);\n            }));\n            return function (_x15) {\n              return _ref.apply(this, arguments);\n            };\n          }()));\n        case 7:\n          list = _context3.sent;\n          resObj.data = list;\n          res.json(resObj);\n          _context3.next = 16;\n          break;\n        case 12:\n          _context3.prev = 12;\n          _context3.t0 = _context3[\"catch\"](1);\n          console.error(_context3.t0);\n          res.status(500).json(Constant.DEFAULT_ERROR);\n        case 16:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[1, 12]]);\n  }));\n  return _getVideo.apply(this, arguments);\n}\nfunction getDetail(_x5, _x6) {\n  return _getDetail.apply(this, arguments);\n}\nfunction _getDetail() {\n  _getDetail = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(req, res) {\n    var resObj, video, _yield$commentModel$f2, Commentcount, user, obj;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          resObj = Common.clone(Constant.DEFAULT_SUCCESS);\n          _context4.prev = 1;\n          _context4.next = 4;\n          return videoModel.findOne({\n            where: {\n              id: req.params.id\n            }\n          });\n        case 4:\n          video = _context4.sent;\n          _context4.next = 7;\n          return commentModel.findAndCountAll({\n            where: {\n              video_id: video.id\n            }\n          });\n        case 7:\n          _yield$commentModel$f2 = _context4.sent;\n          Commentcount = _yield$commentModel$f2.count;\n          _context4.next = 11;\n          return usersModel.findOne({\n            where: {\n              id: video.up\n            }\n          });\n        case 11:\n          user = _context4.sent;\n          obj = _defineProperty(_defineProperty({\n            id: video.id,\n            title: video.title,\n            up: video.up,\n            img: video.img,\n            views: video.views,\n            likes: video.likes,\n            stars: video.stars,\n            shares: video.shares,\n            coins: video.coins,\n            link: video.link,\n            introduction: video.introduction,\n            viewsChange: Common.numChange(video.views),\n            likesChange: Common.numChange(video.likes),\n            starsChange: Common.numChange(video.stars),\n            sharesChange: Common.numChange(video.shares),\n            coinsChange: Common.numChange(video.coins),\n            commentCount: Commentcount,\n            nickname: user.nickname,\n            avatar: user.avatar,\n            followsChange: Common.numChange(user.follows),\n            fansChange: Common.numChange(user.fans)\n          }, \"introduction\", user.introduction), \"createdAt\", moment(user.createdAt).format('YYYY-MM-DD HH:mm:ss'));\n          resObj.data = obj;\n          res.json(resObj);\n          _context4.next = 21;\n          break;\n        case 17:\n          _context4.prev = 17;\n          _context4.t0 = _context4[\"catch\"](1);\n          console.error(_context4.t0);\n          res.status(500).json(Constant.DEFAULT_ERROR);\n        case 21:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4, null, [[1, 17]]);\n  }));\n  return _getDetail.apply(this, arguments);\n}\nfunction getUsers(_x7, _x8) {\n  return _getUsers.apply(this, arguments);\n}\nfunction _getUsers() {\n  _getUsers = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(req, res) {\n    var resObj, userId, user;\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          resObj = Common.clone(Constant.DEFAULT_SUCCESS);\n          _context5.prev = 1;\n          // 从 req.params 中提取用户 ID\n          userId = req.params.id; // 确保与你的路由参数一致\n          console.log(req.params.id);\n          userId = parseInt(userId, 10);\n\n          // 确保 ID 是有效的\n          if (userId) {\n            _context5.next = 7;\n            break;\n          }\n          return _context5.abrupt(\"return\", res.status(400).json(_objectSpread(_objectSpread({}, Constant.DEFAULT_ERROR), {}, {\n            message: 'Invalid user ID'\n          })));\n        case 7:\n          _context5.next = 9;\n          return usersModel.findOne({\n            where: {\n              id: userId\n            }\n          });\n        case 9:\n          user = _context5.sent;\n          if (user) {\n            _context5.next = 12;\n            break;\n          }\n          return _context5.abrupt(\"return\", res.status(404).json(_objectSpread(_objectSpread({}, Constant.DEFAULT_ERROR), {}, {\n            message: 'User not found'\n          })));\n        case 12:\n          // 清空用户密码（如果必要）\n          user.password = '';\n\n          // 设置返回的数据\n          resObj.data = user;\n\n          // 发送响应\n          res.json(resObj);\n          _context5.next = 21;\n          break;\n        case 17:\n          _context5.prev = 17;\n          _context5.t0 = _context5[\"catch\"](1);\n          // 记录错误\n          console.error('Error in getUsers:', _context5.t0);\n\n          // 发送错误响应\n          res.status(500).json(_objectSpread(_objectSpread({}, Constant.DEFAULT_ERROR), {}, {\n            message: 'Internal Server Error'\n          }));\n        case 21:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5, null, [[1, 17]]);\n  }));\n  return _getUsers.apply(this, arguments);\n}\nfunction getCommentByvideo(_x9, _x10) {\n  return _getCommentByvideo.apply(this, arguments);\n}\nfunction _getCommentByvideo() {\n  _getCommentByvideo = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(req, res) {\n    var resObj, result;\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          resObj = Common.clone(Constant.DEFAULT_SUCCESS);\n          _context6.prev = 1;\n          _context6.next = 4;\n          return commentModel.findAndCountAll({\n            where: {\n              video_id: req.params.id\n            },\n            order: [['created_at', 'DESC']]\n          });\n        case 4:\n          result = _context6.sent;\n          resObj.data = {\n            result: result\n          };\n          res.json(resObj);\n          _context6.next = 13;\n          break;\n        case 9:\n          _context6.prev = 9;\n          _context6.t0 = _context6[\"catch\"](1);\n          console.error(_context6.t0);\n          res.status(500).json(Constant.DEFAULT_ERROR);\n        case 13:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6, null, [[1, 9]]);\n  }));\n  return _getCommentByvideo.apply(this, arguments);\n}\nfunction getVideoByuser(_x11, _x12) {\n  return _getVideoByuser.apply(this, arguments);\n}\nfunction _getVideoByuser() {\n  _getVideoByuser = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(req, res) {\n    var resObj, result;\n    return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n          resObj = Common.clone(Constant.DEFAULT_SUCCESS);\n          _context7.prev = 1;\n          _context7.next = 4;\n          return videoModel.findAndCountAll({\n            where: {\n              up: req.params.id\n            },\n            order: [['created_at', 'DESC']]\n          });\n        case 4:\n          result = _context7.sent;\n          resObj.data = {\n            result: result\n          };\n          res.json(resObj);\n          _context7.next = 13;\n          break;\n        case 9:\n          _context7.prev = 9;\n          _context7.t0 = _context7[\"catch\"](1);\n          console.error(_context7.t0);\n          res.status(500).json(Constant.DEFAULT_ERROR);\n        case 13:\n        case \"end\":\n          return _context7.stop();\n      }\n    }, _callee7, null, [[1, 9]]);\n  }));\n  return _getVideoByuser.apply(this, arguments);\n}\nfunction getDanmakuByvideo(_x13, _x14) {\n  return _getDanmakuByvideo.apply(this, arguments);\n}\nfunction _getDanmakuByvideo() {\n  _getDanmakuByvideo = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(req, res) {\n    var resObj, result;\n    return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n      while (1) switch (_context8.prev = _context8.next) {\n        case 0:\n          resObj = Common.clone(Constant.DEFAULT_SUCCESS);\n          _context8.prev = 1;\n          _context8.next = 4;\n          return videoModel.findAndCountAll({\n            where: {\n              up: req.params.id\n            },\n            order: [['created_at', 'DESC']]\n          });\n        case 4:\n          result = _context8.sent;\n          resObj.data = {\n            result: result\n          };\n          res.json(resObj);\n          _context8.next = 13;\n          break;\n        case 9:\n          _context8.prev = 9;\n          _context8.t0 = _context8[\"catch\"](1);\n          console.error(_context8.t0);\n          res.status(500).json(Constant.DEFAULT_ERROR);\n        case 13:\n        case \"end\":\n          return _context8.stop();\n      }\n    }, _callee8, null, [[1, 9]]);\n  }));\n  return _getDanmakuByvideo.apply(this, arguments);\n}\n\n//# sourceURL=webpack://bilibili-server/./server/controller/video.js?");

/***/ }),

/***/ "./server/models/carousel.js":
/*!***********************************!*\
  !*** ./server/models/carousel.js ***!
  \***********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// 引入Sequelize模块\nvar Sequelize = __webpack_require__(/*! sequelize */ \"sequelize\");\n\n// 引入数据库实例\nvar db = __webpack_require__(/*! ../util/db */ \"./server/util/db.js\");\n\n// 定义model\nvar carousel = db.define('carousel', {\n  id: {\n    type: Sequelize.INTEGER,\n    primaryKey: true,\n    allowNull: false,\n    autoIncrement: true\n  },\n  img: {\n    type: Sequelize.STRING(200),\n    allowNull: false\n  },\n  title: {\n    type: Sequelize.STRING(45),\n    allowNull: false\n  },\n  backgroundColor: {\n    type: Sequelize.STRING(45),\n    allowNull: false\n  }\n}, {\n  // 是否支持驼峰\n  underscored: true,\n  // MySQL数据库表名\n  tableName: 'carousel'\n});\n// 导出model\nmodule.exports = carousel;\n\n//# sourceURL=webpack://bilibili-server/./server/models/carousel.js?");

/***/ }),

/***/ "./server/models/comment.js":
/*!**********************************!*\
  !*** ./server/models/comment.js ***!
  \**********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// 引入Sequelize模块\nvar Sequelize = __webpack_require__(/*! sequelize */ \"sequelize\");\n\n// 引入数据库实例\nvar db = __webpack_require__(/*! ../util/db */ \"./server/util/db.js\");\n\n// 定义model\nvar comment = db.define('comment', {\n  id: {\n    type: Sequelize.BIGINT,\n    primaryKey: true,\n    allowNull: false,\n    autoIncrement: true\n  },\n  video_id: {\n    type: Sequelize.BIGINT,\n    allowNull: false\n  },\n  user_id: {\n    type: Sequelize.BIGINT,\n    allowNull: false\n  },\n  talk: {\n    type: Sequelize.STRING(1000)\n  },\n  created_at: {\n    type: Sequelize.DATE\n  }\n}, {\n  // 是否支持驼峰\n  underscored: true,\n  // MySQL数据库表名\n  tableName: 'comment'\n});\n// 导出model\nmodule.exports = comment;\n\n//# sourceURL=webpack://bilibili-server/./server/models/comment.js?");

/***/ }),

/***/ "./server/models/user.js":
/*!*******************************!*\
  !*** ./server/models/user.js ***!
  \*******************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// 引入Sequelize模块\nvar Sequelize = __webpack_require__(/*! sequelize */ \"sequelize\");\n\n// 引入数据库实例\nvar db = __webpack_require__(/*! ../util/db */ \"./server/util/db.js\");\n\n// 定义model\nvar users = db.define('users', {\n  id: {\n    type: Sequelize.INTEGER,\n    primaryKey: true,\n    allowNull: false,\n    autoIncrement: true\n  },\n  username: {\n    type: Sequelize.STRING(40),\n    allowNull: false\n  },\n  nickname: {\n    type: Sequelize.STRING(40),\n    allowNull: false,\n    defaultValue: 'bilibili用户'\n  },\n  password: {\n    type: Sequelize.STRING(20),\n    allowNull: false,\n    defaultValue: '123456'\n  },\n  avatar: {\n    type: Sequelize.STRING(10000),\n    defaultValue: 'data:image/gif;base64,R0lGODlhtAC0AOYAALzEy+To7rG6wb/Hzd/k6rK7wsPK0bvDybO8w9/j6dDW3NHX3eHl6+Hm7LnByLa+xeDl6+Lm7M/V27vDyt7j6dHX3r/Gzb/HzsLJ0LS9xLW+xbe/xtLY3s/V3OPn7dne5NXb4eDk67jAx7S8w+Dk6rrCybW9xMXM08TL0sLK0Nrf5cXM0tjd48zS2bO7wsrR17W+xLfAx8fO1La/xsbN07K7wbzEytzh573FzNLX3uLn7cDHzsbN1NPZ377Gzb7FzNbc4sjP1dfd49bb4tvg5svR2LfAxsnQ1s7U293h6Nbb4dTa4MrQ19fc4t3i6L7GzMnP1s7U2tXa4M3T2sDIz97i6N7i6dje5MjO1dfc473Ey8HJz9vg57jBx8jP1tPY38PL0cfO1dne5dXa4ePn7sHIz8vS2Nrf5tDW3djd5M3T2cDIztTZ4L3Fy7rCyMTL0czT2bC5wOXp7wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4zLWMwMTEgNjYuMTQ1NjYxLCAyMDEyLzAyLzA2LTE0OjU2OjI3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1OTQ4QTFCMzg4NDAxMUU1OTA2NUJGQjgwNzVFMDQ2NSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1OTQ4QTFCNDg4NDAxMUU1OTA2NUJGQjgwNzVFMDQ2NSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjU5NDhBMUIxODg0MDExRTU5MDY1QkZCODA3NUUwNDY1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU5NDhBMUIyODg0MDExRTU5MDY1QkZCODA3NUUwNDY1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAAAAAAAsAAAAALQAtAAAB/+AcoKDhIWGh4iJiouMjY6PkJGSk5SVlpeYmZqbnJ2en6ChoqOkpaanqKmqq6ytrq+wsbKztLW2t7i5uru8vb6/wMHCw8TFxsfIycrLzM3Oz9DR0tPU1dbX2Nna29zd3t/g4eLj5OXm5+jp6uvs7e7v8PHy8/T19sA6SCtTCakBCyuKOLmXKAGOOAhLiDkFoQzCOA9YEDyE5SHCBx9KhdhhMc6EBhMJeXDQMY6GjKIgXCgZR0jIQR4msDRxJRQBHyzjoHwpR0LODRI9keDI0kAAnoI8rMgJoyYnlTkBUEA6KMDSmTsxhTjIEsBAqlWvlowR9BIBCzmf9ANLyCrTrJP/SAzI+WMtW5EncmpIUwkCTpZaqtw9FIBGzgxlIRHgWvLH1MGIDLN8ACRSArQsfRCAnCgAj5wmsjwigbnkk80hA6hezbr1ajkeMoCu7Lq1HIM5C9yQU7v363EQFhxBMeGA8ePIkx+fMEFAzjgFmCtHPuHBcwEAik/fbnwCCiZfQHKzcoLk8/Po06tfr95BC7vWAkgQwb6+/fv4ETqocC2EgfwABihgRzToQM1ZJT0AwIIMNujggxBGKOGEFFYIgHkWYQCBNA0A0BEASOzmDAMS2NBRCh5AE4AMFiGAhIHSeIAEAhYdAQ0HFmkwxDVDmPBQAU2MiCECSiDiAQkhMBAC/wFMNunkk1ASkMCUUzJJAgQMMNDAllxyGUEEXTaQ5ZhjQmDmmRCEcOVRhyhBI0I2RNCMGRZ5cUgO5RWAQAYuCCBADYDW4OeghBZqqJ8FuLAnDBo84OijkDqqwaQwwGDCpRlkOsKmCHTaqQsjAIDFAocEYVEHzDCA4QMkFNIAGAgdcMEAtM5K6621XqDrrrz2uiuuFgQr7LDEFmsBrsjiWgJCYIg3CAnW6ZeiMgtYBEUhEfwQhwEqsFkMGSxw9IOchHjxIwjKBICBRS4R8pkZzHgWhwyFCGHRCcoQMIJFZxAyRBz4NhMADgIUOYgKFjnAQDJLOIeQboTQUAB8y3wgAP8PhHBRwEMCwEUMiw+Z8BhvJVChogMHeEuBbA+NkQysDxmxsCARbPBCNDs8QK4cDBhhUQvJrJHwtHJAAAMS0byQwYZJYRgHxsjM9VAJ3kJgAqrQoAFDCFUdYBEKyUiN0ASENCCCBNF0IIKzcpj4kAFhWwQAIRE4gDY0EjiwsxwePpRC3A+1Qbfd0eS9N2PbAo7QAIPf/YzhhBCFENxRW/T3IHU77gzkg6RgEeXHiB0HBmWfnXYMbK/7tuKjl72B5s10sMHMgqg+OeukD9LA62nPTojtiVf+0A+EMPAA7Mx08ADTgjxhOetzDwLBA1g/04EGzPP9vPBjEwKBBtU7o8D/1oS4jdDloVtE9iAhZBC+JVkg0YS3kQzhgAMoRBEkJgpk0OogMvEb61I2CH29LxJWWMIKROAcAUzACpIIgLYsIoITAGFvkVAAAlAjiADejnseIQQBEHDARlBAAT5gWUemIIkXPKcLGEhD9hyhABdwUA4eDF76HrI+QRCgAAqARADYYACHHUZEjvDAstAzAx54TBEKmBghcgg6Y4iuh3L4YRAbEQEFuGE96HoEA2awHgHIgAg0lCIAP8c6G4gQiIw4wwvIyJ5+QUIB9SkACpCYiCjCx3w6tKJFtCBCEnZmDGUwono20AP6OSIIG2NPAbAwskNo8IbOWx0I10AIEoyg/4RyIMJf2DMDNcwQEiowQCTXU4AjYHAQl/wdG0GIPjmQwH2HCIHT0jMCJtDOElWAwi7RgwNEKGAENwReFYshutz50JCGAJl6HuCFG2YiAl/oW3oQYMwNylKTO0SIM7MIzUL8Jz0bkIE1O8GCLfjoPA/oZjJnGc7WFdAFWyxEtZ4zAhpwwJGhSIAEnrDKjpDKkgWYJzgF+ZBxavEQHlhJRzSAAja80hQkmIIBNGCRGfySEH785gfrWcuHHuIDGajBBnBwAhb8DxYk+MAKLBCFdcJSjbWjJ0PPR4gEwBERViDCR4GhgBrAR5msq6JP8yk+AcDHcwtlpk6XGg0FOJUQUP8d6U4DmYAaMLUZVq3kObUq1YeAbRAJEMBXNUGCV3pgnR94YibCSoixBrKsCDmrINK6VkwoQQNlKAQRJpCBdgmCAQdAgFM6QddBoECneI2DXm+jVk98Jg5hFMRVCDkIF8YBeXMVQCUfG1ViiC5ggqBAZTvhhBhARAWCqMIq0QAbKDgHAVz4RGMFQVqymtYiNCCEavuKiRu41gUGKMIXNyCTAuxgiSOojG5FS4i8lHYYoqMXWn/qiSrkUABSaMASEaKF3ILCqvC5rG+xaxEsuA60mtABHKhQgi2EkQFH2IIBFABQTsiObWGA7G8fYiPMmQ4aamMbFATM3ofcDHOEw5v/3gjBBAYLQ3RFaFzhJjyIIlg4GBgmhA4i/DgOC8LD172wRZggYhJvzsRyqHCKQWyRFdDtwNZbGyHEctcBI8Rk0oMBKJOhABNwbRBUsAgYkiHR7klPA/AlMgyyl0PUGgN4VMOcEYAGDRTorCrjjUMQkmFdhMgMzFB7hhayfFifPYS2yEAxQhCQhB13gWipykBwB3GDNyFkf8cgQkFhO4h/9eAZLYiDwQSBsIfQORkNcJphBUGDDHxlGSoowJ4HYa+H7GAZnkWInegGAA0k5hhKGIEDYDQIUz2Ey8kQgwse8gBrRmBdFzDDAna9gBzkoALADrawh01sYP8a2LxOtrKX/83sZVfA19CuQAucN4E6i5CjCMlAJZGxBYuM2RALoEF1NDADGAigAHrylLo95YJ2o/vd8NbTCDLQqA1sIAYiEEEM9o3vfOvbCPYO+Axm8KhJaQABg0K3AEzwBgngWRAVESAzmrBKBGS2EAFIEwNIQAEKJOBJVAq5yBPQ8ZJ73EpYytKWyKSllbM8S2gKgcxJbnIKHNkQIPBzAQjNjN7GwQQXnwYI3omQazmjCl1oURRYXVU/xyFO0ACCCscmgUszowEc2IIiMSKNBSgSIRuwkNjHTvayN2iYIwj6MxZA9AG5/e3TVDs0WBBmuNv97k+3ozUIwARs4/3vAZpBC4ZaDf8CtMACdDzPuQvwdcBfx0/rEQEAWnBKbYRgCUsAgRSkMIYxLKAHIGjCFVRABC6ogAUg4IADII+QMHDg9bCHfQf29ZARKCD2uLdrHBDQgyawIK4fEAIQNL+EHoB+CJrvwReykAC2xaMHX/80Ij5QEmsbIgJ1j0MYJvFweARglLVfyCHk/JCDGuILLKmBXNkyhII+xOiGACRCrFwV8GeIMyKd6EsHsbKS4ACgQNB4D8NzSBEAZEAGqiEHNzBrOREFhrAELJEBFKMu57FMBcgmrpYTNsB0cpCBHQEXmXYeBYBGkNEAbvYcFxcAXsMSDlhd6WFjkNED6eEDGeN0FgFkguD/BO7HEo82GKKTE+o3CPvEEg7gLdKEHt/GFn2mHnpVZiXRgwQwdeehATYVEommHgIAQSNxHksgCKGmHiwEFgGQdOsRXCH4HPAyPfXRBRwYEiBQH9oWBeixAwEwBffBH1Thc+rxArqXIFZAH/bxA/1lDyFgg+mhARuAHgJgLvchAKdGED7xd9FyHxZ4D23gePmBAIIREkQggJioHmrwEl/4ifXBZvcQAMNEilj4iPOQBZ6oiuixfQRxhLBISs4nDx6QiLV4HxxwD1Kwi/gRWPbghMDIStYnD7tTjPcBa/KgBMp4HxPQfe7AY8+IhdIVDw3gWtVYH/TnDlmwjfaxAVWogg60CI7pkQPxQAbZZ47nUWDvcAWvyI7+N4jocIXyqB4FIH7tEADadI/p8WDtsIT+qB7R6A5IMJBltH7lkFUIiR7uqA7f05DqAQDSWA7/IpHpsXPsUI4YyRJhmA4S1JHpgYPo4AS0J5LPIQI3dw5v2BHnFo/+WAOTZg4yhpLnYX6xEAgAOw=='\n  },\n  follows: {\n    type: Sequelize.INTEGER,\n    defaultValue: 0\n  },\n  fans: {\n    type: Sequelize.INTEGER,\n    defaultValue: 0\n  },\n  introduction: {\n    type: Sequelize.STRING(100),\n    defaultValue: '这个人很懒，还没有个性签名'\n  },\n  like: {\n    type: Sequelize.STRING(200)\n  },\n  star: {\n    type: Sequelize.STRING(200)\n  },\n  coin: {\n    type: Sequelize.STRING(200)\n  }\n}, {\n  // 是否支持驼峰\n  underscored: true,\n  // MySQL数据库表名\n  tableName: 'users'\n});\n// 导出model\nmodule.exports = users;\n\n//# sourceURL=webpack://bilibili-server/./server/models/user.js?");

/***/ }),

/***/ "./server/models/video.js":
/*!********************************!*\
  !*** ./server/models/video.js ***!
  \********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// 引入Sequelize模块\nvar Sequelize = __webpack_require__(/*! sequelize */ \"sequelize\");\n\n// 引入数据库实例\nvar db = __webpack_require__(/*! ../util/db */ \"./server/util/db.js\");\n\n// 定义model\nvar video = db.define('video', {\n  id: {\n    type: Sequelize.INTEGER,\n    primaryKey: true,\n    allowNull: false,\n    autoIncrement: true\n  },\n  title: {\n    type: Sequelize.STRING(40),\n    allowNull: false\n  },\n  up: {\n    type: Sequelize.BIGINT,\n    allowNull: false\n  },\n  img: {\n    type: Sequelize.STRING(200),\n    allowNull: false\n  },\n  views: {\n    type: Sequelize.INTEGER,\n    allowNull: false,\n    defaultValue: 0\n  },\n  likes: {\n    type: Sequelize.INTEGER,\n    allowNull: false,\n    defaultValue: 0\n  },\n  stars: {\n    type: Sequelize.INTEGER,\n    allowNull: false,\n    defaultValue: 0\n  },\n  shares: {\n    type: Sequelize.INTEGER,\n    allowNull: false,\n    defaultValue: 0\n  },\n  coins: {\n    type: Sequelize.INTEGER,\n    allowNull: false,\n    defaultValue: 0\n  },\n  link: {\n    type: Sequelize.STRING(300),\n    defaultValue: 'http://vali-g1.cp31.ott.cibntv.net/youku/697446c85e14171c789dd2e19/030008010063EEE4E2010BE212B6CF96302AC3-4F0C-4E1C-85EC-C1951BACD94D.mp4?sid=167929725600010003194_00_B18920f2dde5e01b66b0d894b111478cb&sign=1ac94b68c382fdc16544442e8a85dd94&ctype=50&si=183&psid=85ac4a01039bd75c1105687b9bec8c1b41346'\n  },\n  introduction: {\n    type: Sequelize.STRING(1000)\n  }\n}, {\n  // 是否支持驼峰\n  underscored: true,\n  // MySQL数据库表名\n  tableName: 'video'\n});\n// 导出model\nmodule.exports = video;\n\n//# sourceURL=webpack://bilibili-server/./server/models/video.js?");

/***/ }),

/***/ "./server/routes/index.js":
/*!********************************!*\
  !*** ./server/routes/index.js ***!
  \********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var express = __webpack_require__(/*! express */ \"express\");\nvar router = express.Router();\nvar getData = __webpack_require__(/*! ../controller/video.js */ \"./server/controller/video.js\");\n\n//获取轮播图\nrouter.get('/getCarousel', getData.getCarousel);\n//获取首页视频页信息\nrouter.get('/getVideo', getData.getVideo);\n//获取视频详情页信息\nrouter.get('/getDetail/:id', getData.getDetail);\n//获取用户资料\nrouter.get('/getUsers/:id', getData.getUsers);\n//获取视频评论\nrouter.get('/getCommentByvideo/:id', getData.getCommentByvideo);\n// router.get('/getCommentByuser/:id', getData.getCommentByuser)\n//获取用户投稿视频\nrouter.get('/getVideoByuser/:id', getData.getVideoByuser);\nrouter.get('/getDanmakuByvideo/:id', getData.getDanmakuByvideo);\nmodule.exports = router;\n\n//# sourceURL=webpack://bilibili-server/./server/routes/index.js?");

/***/ }),

/***/ "./server/routes/user.js":
/*!*******************************!*\
  !*** ./server/routes/user.js ***!
  \*******************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var express = __webpack_require__(/*! express */ \"express\");\nvar router = express.Router();\nvar expressJoi = __webpack_require__(/*! @escook/express-joi */ \"@escook/express-joi\");\nvar user = __webpack_require__(/*! ../controller/user.js */ \"./server/controller/user.js\");\nvar middleware = __webpack_require__(/*! ../util/middleware */ \"./server/util/middleware.js\");\nvar _require = __webpack_require__(/*! ../util/verification */ \"./server/util/verification.js\"),\n  reg_schema = _require.reg_schema,\n  login_schema = _require.login_schema;\n\n//登录\nrouter.post('/login', expressJoi(login_schema), user.userLogin);\n//注册\nrouter.post('/register', expressJoi(reg_schema), user.userRegister);\n//浏览量加一\nrouter.post('/addView', user.addView);\n//需要登录权限的功能\nrouter.use('/', middleware.checkUser, __webpack_require__(/*! ./userNeedCheck */ \"./server/routes/userNeedCheck.js\"));\nmodule.exports = router;\n\n//# sourceURL=webpack://bilibili-server/./server/routes/user.js?");

/***/ }),

/***/ "./server/routes/userNeedCheck.js":
/*!****************************************!*\
  !*** ./server/routes/userNeedCheck.js ***!
  \****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var express = __webpack_require__(/*! express */ \"express\");\nvar router = express.Router();\nvar userNeedCheck = __webpack_require__(/*! ../controller/userNeedCheck */ \"./server/controller/userNeedCheck.js\");\nrouter.post('/changeLike', userNeedCheck.changeLike);\nrouter.post('/changeUserLike', userNeedCheck.changeUserLike);\nrouter.post('/addComment', userNeedCheck.addComment);\n\n// router.post('/changeCoin', userNeedCheck.changeCoin)\n// router.post('/changeCoin', userNeedCheck.changeStar)\n// router.post('/changeShare', userNeedCheck.changeShare)\n\nmodule.exports = router;\n\n//# sourceURL=webpack://bilibili-server/./server/routes/userNeedCheck.js?");

/***/ }),

/***/ "./server/util/constant.js":
/*!*********************************!*\
  !*** ./server/util/constant.js ***!
  \*********************************/
/***/ ((module) => {

eval("// 定义一个对象\nvar obj = {\n  // 默认请求成功\n  DEFAULT_SUCCESS: {\n    code: 10000,\n    msg: ''\n  },\n  // 默认请求失败\n  DEFAULT_ERROR: {\n    code: 188,\n    msg: '出现错误'\n  },\n  // 定义错误返回-缺少必要参数\n  LACK: {\n    code: 199,\n    msg: '缺少必要参数'\n  },\n  TOKEN_ERROR: {\n    code: 401,\n    msg: 'Token验证失败'\n  },\n  // 定义错误返回-用户名或密码错误\n  LOGIN_ERROR: {\n    code: 101,\n    msg: '用户名或密码错误'\n  },\n  REGISTER_ERROR: {\n    code: 102,\n    msg: '该用户名已存在'\n  },\n  VERFICATION_ERROR: {\n    code: 103,\n    msg: '数据校验失败'\n  }\n};\n// 导出对象，给其他方法调用\nmodule.exports = obj;\n\n//# sourceURL=webpack://bilibili-server/./server/util/constant.js?");

/***/ }),

/***/ "./server/util/db.js":
/*!***************************!*\
  !*** ./server/util/db.js ***!
  \***************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// 引入Sequelize模块\nvar Sequelize = __webpack_require__(/*! sequelize */ \"sequelize\");\n// 引入数据库连接配置\nvar CONFIG = __webpack_require__(/*! ../config */ \"./server/config.js\");\n\n// 实例化数据库对象\nvar sequelize = new Sequelize(CONFIG.MYSQL.database, CONFIG.MYSQL.username, CONFIG.MYSQL.password, {\n  host: CONFIG.MYSQL.host,\n  // 数据库类型\n  dialect: 'mysql',\n  // 是否打印日志\n  logging: CONFIG.DEBUG ? console.log : false,\n  // 配置数据库连接池\n  pool: {\n    max: 5,\n    min: 0,\n    idle: 10000\n  },\n  // 时区设置\n  timezone: '+08:00'\n});\n// 导出实例化数据库对象\nmodule.exports = sequelize;\n\n//# sourceURL=webpack://bilibili-server/./server/util/db.js?");

/***/ }),

/***/ "./server/util/middleware.js":
/*!***********************************!*\
  !*** ./server/util/middleware.js ***!
  \***********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var Token = __webpack_require__(/*! ../controller/token */ \"./server/controller/token.js\");\nvar Constant = __webpack_require__(/*! ../util/constant */ \"./server/util/constant.js\");\nvar exportObj = {\n  checkUser: checkUser\n};\nmodule.exports = exportObj;\nfunction checkUser(req, res, next) {\n  var token = req.headers.token;\n  var tokenVerifyObj = Token.decrypt(token);\n  if (tokenVerifyObj.token) {\n    next();\n  } else {\n    res.json(Constant.TOKEN_ERROR);\n  }\n}\n\n//# sourceURL=webpack://bilibili-server/./server/util/middleware.js?");

/***/ }),

/***/ "./server/util/utilMethod.js":
/*!***********************************!*\
  !*** ./server/util/utilMethod.js ***!
  \***********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// 引入async模块\nvar async = __webpack_require__(/*! async */ \"async\");\n// 引入常量模块\nvar Constant = __webpack_require__(/*! ./constant */ \"./server/util/constant.js\");\nvar exportObj = {\n  clone: clone,\n  checkParams: checkParams,\n  autoFn: autoFn,\n  numChange: numChange\n};\nmodule.exports = exportObj;\nfunction clone(obj) {\n  return JSON.parse(JSON.stringify(obj));\n}\n//检查params是否在数据库存在\nfunction checkParams(params, checkArr) {\n  return new Promise(function (resolve, reject) {\n    var flag = true;\n\n    // 遍历需要检查的字段\n    checkArr.forEach(function (v) {\n      // 如果参数中缺少某个字段，将标记设置为 false\n      if (!params[v]) {\n        flag = false;\n      }\n    });\n\n    // 根据标记结果决定 Promise 的状态\n    if (flag) {\n      resolve(); // 所有字段都存在，返回成功\n    } else {\n      reject(Constant.LACK); // 存在缺失字段，返回失败\n    }\n  });\n}\nfunction autoFn(tasks, res, resObj) {\n  async.auto(tasks, function (err) {\n    if (!!err) {\n      console.log(JSON.stringify(err));\n      res.json({\n        code: err.code || Constant.DEFAULT_ERROR.code,\n        msg: err.msg || JSON.stringify(err)\n      });\n    } else {\n      res.json(resObj);\n    }\n  });\n}\nfunction numChange(num) {\n  if (num >= 10000) {\n    var n1 = Math.floor(num / 10000);\n    var n2 = Math.floor(num % 10000 / 1000);\n    if (n2 == 0) {\n      return n1 + '万';\n    } else {\n      return n1 + '.' + n2 + '万';\n    }\n  } else {\n    return num;\n  }\n}\n\n//# sourceURL=webpack://bilibili-server/./server/util/utilMethod.js?");

/***/ }),

/***/ "./server/util/verification.js":
/*!*************************************!*\
  !*** ./server/util/verification.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("//导入joi包\nvar joi = __webpack_require__(/*! joi */ \"joi\");\n\n/**\r\n * string() 值必须是字符串\r\n * alphanum() 值只能是包含 a-zA-Z0-9 的字符串\r\n * min(length) 最小长度\r\n * max(length) 最大长度\r\n * required() 值是必填项，不能为 undefined\r\n * pattern(正则表达式) 值必须符合正则表达式的规则\r\n */\n\n// 用户名的验证规则\nvar username = joi.string().alphanum().min(6).max(20).required();\n\n// 密码的验证规则\nvar password = joi.string().pattern(/^[\\S]{6,40}$/).required();\n\n// 昵称的验证规则\nvar nickname = joi.string().min(3).max(30).required();\n\n// 电子邮件的验证规则\nvar id = joi.number().integer().positive().required();\n\n// 注册表单的验证规则对象\nexports.reg_schema = {\n  body: {\n    username: username,\n    password: password,\n    nickname: nickname,\n    id: id\n  }\n};\n\n// 登录表单的验证规则对象\nexports.login_schema = {\n  body: {\n    username: username,\n    password: password\n  }\n};\n\n//# sourceURL=webpack://bilibili-server/./server/util/verification.js?");

/***/ }),

/***/ "@escook/express-joi":
/*!**************************************!*\
  !*** external "@escook/express-joi" ***!
  \**************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@escook/express-joi");

/***/ }),

/***/ "async":
/*!************************!*\
  !*** external "async" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("async");

/***/ }),

/***/ "cookie-parser":
/*!********************************!*\
  !*** external "cookie-parser" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("cookie-parser");

/***/ }),

/***/ "cors":
/*!***********************!*\
  !*** external "cors" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("cors");

/***/ }),

/***/ "express":
/*!**************************!*\
  !*** external "express" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("express");

/***/ }),

/***/ "joi":
/*!**********************!*\
  !*** external "joi" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("joi");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("jsonwebtoken");

/***/ }),

/***/ "moment":
/*!*************************!*\
  !*** external "moment" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("moment");

/***/ }),

/***/ "morgan":
/*!*************************!*\
  !*** external "morgan" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("morgan");

/***/ }),

/***/ "sequelize":
/*!****************************!*\
  !*** external "sequelize" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("sequelize");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./server/app.js");
/******/ 	
/******/ })()
;